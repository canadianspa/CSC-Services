(this["webpackJsonpcsc-frontend"]=this["webpackJsonpcsc-frontend"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),c=a.n(l),o=(a(67),a(58)),i=a(11),u=(a(68),a(26)),m=a(57),s=a(15),d=(a(72),a(8)),p=a(110),E=a(111),f=a(112),h=a(113),b=a(114),v=a(115);var g=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1];return r.a.createElement(p.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(E.a,{href:"/"},r.a.createElement("img",{className:"logo",src:"/images/csc-logo.png",alt:"logo"})),r.a.createElement(E.a,{href:"/"},"CSC Services"),r.a.createElement(f.a,{onClick:function(){return l(!a)}}),r.a.createElement(h.a,{isOpen:a,navbar:!0},r.a.createElement(b.a,{className:"mr-auto",navbar:!0},r.a.createElement(v.a,{href:"/update"},"Update Spreadsheet"),r.a.createElement(v.a,{href:"/import"},"Import"),r.a.createElement(v.a,{href:"/turnover"},"Turnover"),r.a.createElement(v.a,{href:"/orderwell"},"Order Well"))))};var y=function(e){var t=e.children;return r.a.createElement("div",{className:"jumbotron"},t)};var O=function(){return r.a.createElement(y,null,r.a.createElement("span",null,"Welcome to Canadian Spa Services"))},S=(a(29),[{name:"bandq",title:"B&Q"},{name:"homebase",title:"Homebase"},{name:"jtf",title:"JTF"},{name:"wayfair",title:"Wayfair"},{name:"range",title:"The Range"},{name:"travisperkins",title:"Travis Perkins"},{name:"robert_dyas",title:"Robert Dyas"},{name:"hornbach",title:"Hornbach"},{name:"shop_direct",title:"Shop Direct"}]),j=[{name:"bandq",title:"B&Q CSV",requires_file:!0,file_type:".csv"},{name:"argos",title:"Argos CSV",requires_file:!0,file_type:".csv"},{name:"range",title:"The Range",requires_file:!1,file_type:null},{name:"homebase",title:"Homebase XML",requires_file:!0,file_type:".xml"},{name:"wayfair",title:"Wayfair CSV",requires_file:!0,file_type:".csv"},{name:"robert_dyas",title:"Robert Dyas CSV",requires_file:!0,file_type:".csv"},{name:"shop_direct",title:"Shop Direct TXT",requires_file:!0,file_type:".txt"}];function k(e){if(e.ok)return e.json();throw new Error("Bad response.")}var _=a(61),C=a(116),N=a(117),T=a(52);var w=function(e){var t=e.orders,a=e.handleEditClick,n=e.handleCheckboxClick;return r.a.createElement(C.a,{bordered:!0,striped:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Address 1"),r.a.createElement("th",null,"City"),r.a.createElement("th",null,"County"),r.a.createElement("th",null,"Postcode"),r.a.createElement("th",null,"Country"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e,t){var l=e.deliver_to_attributes;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(N.a,{type:"checkbox",id:t,defaultChecked:"true",onChange:n})),r.a.createElement("td",null,l.first_name),r.a.createElement("td",null,l.last_name),r.a.createElement("td",null,l.address1),r.a.createElement("td",null,l.city),r.a.createElement("td",null,l.state),r.a.createElement("td",null,l.zip),r.a.createElement("td",null,l.country),r.a.createElement("th",null,r.a.createElement(T.a,{color:"secondary",size:"sm",id:t,onClick:a},"Edit Address")))}))))},x=a(118),I=a(124),A=a(119),R=a(120);var q=function(e){var t,a,n=e.isOpen,l=e.toggle,c=e.modalType,o=e.addresses,i=e.handleAddressSelection;return"editAddress"===c&&(t="Select address",a=r.a.createElement(x.a,{onSubmit:i},r.a.createElement(N.a,{name:"address",type:"select"},o.map((function(e,t){return r.a.createElement("option",{key:t},e.summaryline)}))),r.a.createElement("div",{className:"button-parent"},r.a.createElement(T.a,{color:"danger",onClick:l},"Cancel"),r.a.createElement(T.a,{color:"primary",type:"submit"},"Update")))),r.a.createElement(I.a,{isOpen:n},r.a.createElement(A.a,{toggle:l},t),r.a.createElement(R.a,null,a))};var F=function(e){var t=e.orders,a=e.file,l=e.updateAddress,c=e.handleImport,o=e.setInitialState,i=Object(n.useState)([]),u=Object(d.a)(i,2),m=u[0],s=u[1],p=Object(n.useState)([]),E=Object(d.a)(p,2),f=E[0],h=E[1],b=Object(n.useState)(!1),v=Object(d.a)(b,2),g=v[0],y=v[1],O=Object(n.useState)([]),S=Object(d.a)(O,2),j=S[0],C=S[1];return Object(n.useEffect)((function(){h(t.map((function(e,t){return t})))}),[]),0===t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"No orders found."),r.a.createElement(T.a,{color:"danger",onClick:o},"Cancel")):r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("h5",null,"File: ",a.name),r.a.createElement(w,{orders:t,handleCheckboxClick:function(e){var t=e.target,a=t.id,n=t.checked,r=parseInt(a);h(n?[].concat(Object(_.a)(f),[r]):f.filter((function(e){return e!==r})))},handleEditClick:function(e){var a=e.target.id,n=parseInt(a);s(n),function(e){var t="".concat("/api","/postcoder?postcode=").concat(e);return fetch(t,{method:"GET"}).then(k).catch((function(e){return console.error(e)}))}(t[n].deliver_to_attributes.zip).then((function(e){C(e),y(!0)}))}}),r.a.createElement("div",{className:"button-parent"},r.a.createElement(T.a,{color:"danger",onClick:o},"Cancel"),r.a.createElement(T.a,{color:"primary",onClick:function(){var e=t.filter((function(e,t){return f.includes(t)}));c(e)}},"Import")),r.a.createElement(q,{isOpen:g,toggle:function(){return y(!g)},modalType:"editAddress",addresses:j,handleAddressSelection:function(e){var t=e.target.elements.address.value;e.preventDefault(),y(!1);var a=j.find((function(e){return e.summaryline===t}));l(m,a)}}))},V=(a(82),a(53)),D=a(60);var B=function(e){var t=e.selectedVendor,a=e.handleFileSubmit,l=Object(n.useCallback)((function(e){e[0]&&a(t.name,e[0])}),[t,a]),c=Object(D.a)({onDrop:l,multiple:!1,accept:t.file_type}),o=c.getRootProps,i=c.getInputProps;return r.a.createElement("div",Object.assign({},o(),{className:"dropzone-container"}),r.a.createElement("input",i()),r.a.createElement("div",{className:"dropzone-content"},r.a.createElement(V.a,{icon:"upload"}),r.a.createElement("span",null,"Click to upload file (",t.file_type,")")))},Y=(a(83),a(121));var P=function(e){var t=e.style;return r.a.createElement(Y.a,{color:"dark",className:"spinner",style:t})};var z=function(){var e=Object(n.useState)(j[0]),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(d.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(null),p=Object(d.a)(m,2),E=p[0],f=p[1],h=Object(n.useState)(!1),b=Object(d.a)(h,2),v=b[0],g=b[1],O=Object(n.useState)(!0),S=Object(d.a)(O,2),_=S[0],C=S[1];function N(e,t){g(!0),function(e,t){var a="".concat("/api","/orders?vendor=").concat(e),n={method:"POST"};if(t){var r=new FormData;r.append("file",t),n.body=r}return fetch(a,n).then(k).catch((function(e){return console.error(e)}))}(e,t).then((function(e){e.error?(g(!1),s.b.dark("Error getting orders, ensure you are uploading the correct file.")):(u(e),f(t),g(!1),C(!1))}))}function w(){l(j[0]),u([]),C(!0)}var x=function(){return j.map((function(e,t){return r.a.createElement(T.a,{key:t,className:"vendor-button",color:a===e?"primary":"secondary",onClick:function(){return function(e){l(e),e.requires_file||N(e.name)}(e)}},e.title)}))};return r.a.createElement("div",{className:"container"},r.a.createElement(y,null,r.a.createElement("span",null,"Import to Veeqo")),_?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Choose data source"),r.a.createElement("div",null,r.a.createElement(x,null)),v?r.a.createElement(P,{style:{marginTop:"120px"}}):r.a.createElement(B,{selectedVendor:a,handleFileSubmit:N})):r.a.createElement(F,{orders:i,file:E,updateAddress:function(e,t){var a=t.premise,n=t.street,r=t.posttown,l=t.county,c=t.postcode,o=i.map((function(t,o){return o===e&&(t.deliver_to_attributes.address1=a+" "+n,t.deliver_to_attributes.city=r,t.deliver_to_attributes.state=l,t.deliver_to_attributes.zip=c),t}));u(o)},handleImport:function(e){s.b.dark("Importing..."),function(e){var t="".concat("/api","/import"),a={method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify(e)};return fetch(t,a).then(k).catch((function(e){return console.error(e)}))}(e).then((function(e){s.b.dark("Imported ".concat(e.length," orders")),w()}))},setInitialState:w}))},G=(a(84),a(122)),M=a(125),W=a(126),H=a(123);var J=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),o=Object(d.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(!1),p=Object(d.a)(m,2),E=p[0],f=p[1];return r.a.createElement("div",{className:"container"},r.a.createElement(y,null,r.a.createElement("span",null,"Update Google Spreadsheet")),r.a.createElement(G.a,{isOpen:E,toggle:function(){return f((function(e){return!e}))}},r.a.createElement(M.a,{caret:!0,className:"vendor-dropdown"},i?i.title:"Select vendor"),r.a.createElement(W.a,null,S.map((function(e,t){return r.a.createElement(H.a,{key:t,onClick:function(){return u(e)}},e.title)})))),a?r.a.createElement(P,{style:{width:"70px",height:"70px",marginTop:"5px"}}):r.a.createElement(T.a,{color:"primary",disabled:!i,onClick:function(){l(!0),function(e){var t="".concat("/api","/update?vendor=").concat(e);return fetch(t,{method:"GET"}).then(k).catch((function(e){return console.error(e)}))}(i.name).then((function(e){e.length>0?s.b.dark("Added ".concat(e.length," order(s)")):s.b.dark("No orders added"),l(!1)}))}},"Update"))};a(102);var Q=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(d.a)(c,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){(function(){var e="".concat("/api","/orderwell");return fetch(e,{method:"GET"}).then(k).catch((function(e){return console.error(e)}))})().then((function(e){u(e),l(!1)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(y,null,r.a.createElement("span",null,"Order Well for B&Q")),a?r.a.createElement(P,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{bordered:!0,striped:!0,id:"orderwell-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Order Number"),r.a.createElement("th",null,"Items"))),r.a.createElement("tbody",null,i.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.date),r.a.createElement("td",null,r.a.createElement("a",{target:"_blank",href:e.url,rel:"noopener noreferrer"},e.id)),r.a.createElement("td",null,e.items.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},t>0&&r.a.createElement("br",null),e)}))))})))),r.a.createElement(T.a,{onClick:function(){var e,t,a=document.getElementById("orderwell-table"),n=document.body;if(document.createRange&&window.getSelection){e=document.createRange(),(t=window.getSelection()).removeAllRanges();try{e.selectNodeContents(a),t.addRange(e)}catch(r){e.selectNode(a),t.addRange(e)}}else n.createTextRange&&((e=n.createTextRange()).moveToElementText(a),e.select());document.execCommand("Copy")}},"Copy")))},U=(a(103),a(36)),L=a.n(U);var X=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),o=Object(d.a)(c,2),i=o[0],u=o[1],m=L()().format("YYYY-MM");return r.a.createElement("div",{className:"container"},r.a.createElement(y,null,r.a.createElement("span",null,"Turnover for B&Q")),r.a.createElement("form",{onSubmit:function(e){var t=e.target.elements.date.value;e.preventDefault();var a=L()(t).format("MM/YYYY");u(null),l(!0),function(e){var t="".concat("/api","/turnover?date=").concat(e);return fetch(t,{method:"GET"}).then(k).catch((function(e){return console.error(e)}))}(a).then((function(e){u(e),l(!1)}))},className:"date-form"},r.a.createElement("input",{type:"month",name:"date",min:"2017-04",max:m,defaultValue:m}),r.a.createElement(T.a,{type:"submit",color:"primary"},"Search")),a&&r.a.createElement(P,{style:{marginTop:"50px"}}),i&&r.a.createElement("div",{className:"totals-wrapper"},r.a.createElement("div",{className:"info-card"},r.a.createElement("label",null,"Total excluding VAT"),r.a.createElement("span",null,"\xa3",i.total_ex_vat)),r.a.createElement("div",{className:"info-card"},r.a.createElement("label",null,"Total including VAT"),r.a.createElement("span",null,"\xa3",i.total_with_vat))))};u.b.add(m.a);var K=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(o.a,null,r.a.createElement(g,null),r.a.createElement(s.a,{hideProgressBar:!0,autoClose:3e3}),r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.a,{exact:!0,path:"/",component:O}),r.a.createElement(i.a,{path:"/update",component:J}),r.a.createElement(i.a,{path:"/import/",component:z}),r.a.createElement(i.a,{path:"/turnover",component:X}),r.a.createElement(i.a,{path:"/orderwell/",component:Q}))))};c.a.render(r.a.createElement(K,null),document.getElementById("root"))},29:function(e,t,a){},62:function(e,t,a){e.exports=a(107)},68:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.8342de52.chunk.js.map