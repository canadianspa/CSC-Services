(this["webpackJsonpcsc-frontend"]=this["webpackJsonpcsc-frontend"]||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},190:function(e,t,a){},215:function(e,t,a){},217:function(e,t,a){},219:function(e,t,a){},229:function(e,t){},331:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(189),a(183)),i=a(17),u=(a(190),a(63)),m=a(49),s=a(14),d=(a(193),a(7)),f=a(334),p=a(335),E=a(336),h=a(337),v=a(338),b=a(339),g=a(354),O=a(352),y=a(353),j=a(340);var C=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1];return r.a.createElement(f.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(p.a,{href:"/"},r.a.createElement("img",{className:"logo",src:"/images/csc-logo.png",alt:"logo"})),r.a.createElement(p.a,{href:"/"},"CSC Services"),r.a.createElement(E.a,{onClick:function(){return c(!a)}}),r.a.createElement(h.a,{isOpen:a,navbar:!0},r.a.createElement(v.a,{className:"mr-auto",navbar:!0},r.a.createElement(b.a,{href:"/update"},"Update"),r.a.createElement(b.a,{href:"/import"},"Import"),r.a.createElement(b.a,{href:"/calendar"},"Calendar"),r.a.createElement(g.a,{nav:!0,inNavbar:!0},r.a.createElement(O.a,{nav:!0,caret:!0},"B & Q"),r.a.createElement(y.a,{right:!0},r.a.createElement(j.a,null,r.a.createElement(b.a,{href:"/bandq/turnover"},"Turnover")),r.a.createElement(j.a,null,r.a.createElement(b.a,{href:"/bandq/orderwell"},"Order Well")),r.a.createElement(j.a,null,r.a.createElement(b.a,{href:"/bandq/comparison"},"Sales Comparison")))),r.a.createElement(g.a,{nav:!0,inNavbar:!0},r.a.createElement(O.a,{nav:!0,caret:!0},"Shipping"),r.a.createElement(y.a,{right:!0},r.a.createElement(j.a,null,r.a.createElement(b.a,{href:"/shipping/create"},"Create")),r.a.createElement(j.a,null,r.a.createElement(b.a,{href:"/shipping/items"},"Items")))))))};var k=function(e){var t=e.header,a=e.text,n=e.description;return r.a.createElement("div",{className:"card"},r.a.createElement("label",null,t),r.a.createElement("span",null,a),n&&r.a.createElement("p",null,n))};a(65);var S=function(e){var t=e.children;return r.a.createElement("div",{className:"header"},t)};var x=function(e){var t=e.children;return r.a.createElement("div",{className:"jumbotron"},t)},w=a(341);var _=function(e){var t=e.value,a=e.options,n=e.onChange,c=e.useObjects,l=e.objectTitleKey,o=void 0===l?"name":l,i=e.multiple,u=e.name,m=e.style;return r.a.createElement(w.a,{type:"select",className:"select",name:u,style:m,multiple:!!i,value:t,onChange:function(e){if(c){var t=e.target,r=t.value,l=t.name,i=a.find((function(e){return e[o]===r}));n(i,l)}else n(e)}},a.map((function(e,t){return r.a.createElement("option",{key:t},c?e[o]:e)})))},N=a(342);var T=function(e){var t=e.options,a=e.onSubmit,n=e.useObjects,c=e.optionKey,l=e.children,o=e.inputStyle;return r.a.createElement(N.a,{onSubmit:function(e){e.preventDefault();var r=e.target.elements.option.value;if(r)if(n){var l=t.find((function(e){return e[c]===r}));a(l)}else a(r);else a(t[0])}},r.a.createElement(w.a,{name:"option",type:"select",multiple:!0,style:o},t.map((function(e,t){var a=n?e[c]:e;return r.a.createElement("option",{key:t,value:a},a)}))),l)},D=a(343);var Y=function(e){var t=e.style;return r.a.createElement(D.a,{color:"dark",className:"spinner",style:t})},I=a(42),F=a(38),q=a(344),U=a(345),R=a(177);var M=k,V=S,A=x,P=_,L=T,B=Y,z=function(e){var t=e.name,a=e.options,c=e.onChange,l=Object(n.useState)(""),o=Object(d.a)(l,2),i=o[0],u=o[1];function m(e){var n=e.currentTarget.id,r=a.filter((function(e,t){return t!==parseInt(n)}));c(r,t)}return r.a.createElement("div",null,a.map((function(e,t){return r.a.createElement("div",{key:t,className:"multiselect-option"},r.a.createElement("span",null,e),r.a.createElement("button",{id:t,onClick:m},r.a.createElement(F.a,{icon:"times"})))})),r.a.createElement(q.a,null,r.a.createElement(w.a,{name:t,type:"text",value:i,onChange:function(e){var t=e.target.value;u(t)}}),r.a.createElement(U.a,{addonType:"append"},r.a.createElement(R.a,{onClick:function(){if(""!==i){var e=[].concat(Object(I.a)(a),[i]);c(e,t),u("")}}},"Add"))))};var W=function(){return r.a.createElement(A,null,"Welcome to Canadian Spa Services")},H=(a(66),"/api"),J=[{name:"bandq",title:"B&Q"},{name:"homebase",title:"Homebase"},{name:"jtf",title:"JTF"},{name:"wayfair",title:"Wayfair"},{name:"range",title:"The Range"},{name:"travisperkins",title:"Travis Perkins"},{name:"robert_dyas",title:"Robert Dyas"},{name:"hornbach",title:"Hornbach"},{name:"shop_direct",title:"Shop Direct"}],K=[{name:"bandq",title:"B&Q CSV",requires_file:!0,file_type:".csv"},{name:"argos",title:"Argos CSV",requires_file:!0,file_type:".csv"},{name:"range",title:"The Range",requires_file:!1,file_type:null},{name:"homebase",title:"Homebase XML",requires_file:!0,file_type:".xml"},{name:"wayfair",title:"Wayfair CSV",requires_file:!0,file_type:".csv"},{name:"robert_dyas",title:"Robert Dyas CSV",requires_file:!0,file_type:".csv"},{name:"shop_direct",title:"Shop Direct TXT",requires_file:!0,file_type:".txt"},{name:"globus",title:"Globus XML",requires_file:!0,file_type:".xml"},{name:"hornbach",title:"Hornbach PDF",requires_file:!0,file_type:".pdf"}];function $(e){if(e.ok)return e.json();throw new Error("Bad response.")}function Q(e){var t=e.start,a=e.end,n="".concat(H,"/bandq/turnover?start=").concat(t,"&end=").concat(a);return fetch(n).then($).catch((function(e){return console.error(e)}))}function X(){var e="".concat(H,"/bandq/orderwell");return fetch(e).then($).catch((function(e){return console.error(e)}))}function G(){var e="".concat(H,"/shipping/items");return fetch(e).then($).catch((function(e){return console.error(e)}))}function Z(){var e="".concat(H,"/shipping/carriers");return fetch(e).then($).catch((function(e){return console.error(e)}))}var ee=a(26),te=function(e,t){return Object(ee.a)(Object(ee.a)({},e),t)};var ae=a(346);var ne=function(e){var t=e.orders,a=e.handleEditClick,n=e.handleCheckboxClick;return r.a.createElement(ae.a,{bordered:!0,striped:!0,responsive:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Address 1"),r.a.createElement("th",null,"City"),r.a.createElement("th",null,"County"),r.a.createElement("th",null,"Postcode"),r.a.createElement("th",null,"Country"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e,t){var c=e.deliver_to_attributes;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(w.a,{type:"checkbox",id:t,defaultChecked:"true",onChange:n})),r.a.createElement("td",null,c.first_name),r.a.createElement("td",null,c.last_name),r.a.createElement("td",null,c.address1),r.a.createElement("td",null,c.city),r.a.createElement("td",null,c.state),r.a.createElement("td",null,c.zip),r.a.createElement("td",null,c.country),r.a.createElement("th",null,r.a.createElement(R.a,{color:"secondary",size:"sm",id:t,onClick:a},"Edit Address")))}))))};var re=function(e){var t=e.orders,a=e.file,n=e.handleEditAddressClick,c=e.handleCheckboxClick,l=e.handleImportClick,o=e.setInitialState;return 0===t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null,"No orders found"),r.a.createElement(R.a,{color:"danger",onClick:o},"Back")):r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(V,null,"File: ",a.name),r.a.createElement(ne,{orders:t,handleCheckboxClick:c,handleEditClick:n}),r.a.createElement("div",{className:"centered-parent"},r.a.createElement(R.a,{color:"danger",onClick:o},"Cancel"),r.a.createElement(R.a,{onClick:l},"Import")))},ce=(a(215),a(184));var le=function(e){var t=e.selectedVendor,a=e.handleFileSubmit,c=Object(n.useCallback)((function(e){e[0]&&a(t.name,e[0])}),[t,a]),l=Object(ce.a)({onDrop:c,multiple:!1,accept:t.file_type}),o=l.getRootProps,i=l.getInputProps;return r.a.createElement("div",Object.assign({},o(),{className:"dropzone-container"}),r.a.createElement("input",i()),r.a.createElement("div",{className:"dropzone-content"},r.a.createElement(F.a,{icon:"upload"}),r.a.createElement("span",null,"Click to upload file (",t.file_type,")")))},oe=a(351),ie=a(347),ue=a(348);var me=function(e){var t,a,n=e.isOpen,c=e.toggle,l=e.modalType,o=e.addresses,i=e.handleUpdateAddress;return"editAddress"===l&&(t="Select address",a=r.a.createElement(L,{options:o,onSubmit:i,useObjects:!0,optionKey:"summaryline",children:r.a.createElement("div",{className:"button-parent"},r.a.createElement(R.a,{color:"danger",onClick:c},"Cancel"),r.a.createElement(R.a,{color:"primary",type:"submit"},"Update"))})),r.a.createElement(oe.a,{isOpen:n},r.a.createElement(ie.a,{toggle:c},t),r.a.createElement(ue.a,null,a))},se={activeOrderIndex:null,selectedVendor:K[0]};var de=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)([]),f=Object(d.a)(m,2),p=f[0],E=f[1],h=Object(n.useState)([]),v=Object(d.a)(h,2),b=v[0],g=v[1],O=Object(n.useState)(!1),y=Object(d.a)(O,2),j=y[0],C=y[1],k=Object(n.useState)(!0),S=Object(d.a)(k,2),x=S[0],w=S[1],_=Object(n.useState)([]),N=Object(d.a)(_,2),T=N[0],D=N[1],Y=Object(n.useReducer)(te,se),F=Object(d.a)(Y,2),q=F[0],U=F[1],R=function(){return C(!j)};function M(e,t){c(!0),function(e){var t=e.vendor,a=e.file,n="".concat(H,"/import/convert/").concat(t),r={method:"POST"};if(a){var c=new FormData;c.append("file",a),r.body=c}return fetch(n,r).then($).catch((function(e){return console.error(e)}))}({vendor:e,file:t}).then((function(e){c(!1),e.error?s.b.dark("Error getting orders, ensure you are uploading the correct file."):(E(e),u(t),D(e.map((function(e,t){return t}))),w(!1))}))}function L(){U(se),E([]),w(!0)}return r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Import to Veeqo"),x?r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null,"Select data source"),r.a.createElement(P,{options:K,objectTitleKey:"title",onChange:function(e){U({selectedVendor:e}),e.requires_file||M(e.name)},useObjects:!0}),a?r.a.createElement(B,{style:{marginTop:"60px"}}):r.a.createElement(le,{selectedVendor:q.selectedVendor,handleFileSubmit:M})):r.a.createElement(re,{orders:p,file:i,handleEditAddressClick:function(e){var t=e.target.id,a=parseInt(t);(function(e){var t=e.postcode,a="".concat(H,"/postcoder?postcode=").concat(t);return fetch(a).then($).catch((function(e){return console.error(e)}))})({postcode:p[a].deliver_to_attributes.zip}).then((function(e){U({activeOrderIndex:a}),g(e),C(!0)}))},handleCheckboxClick:function(e){var t=e.target,a=t.id,n=t.checked,r=parseInt(a);D(n?[].concat(Object(I.a)(T),[r]):T.filter((function(e){return e!==r})))},handleImportClick:function(){s.b.dark("Importing..."),function(e){var t=e.orders,a="".concat(H,"/import/orders"),n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};return fetch(a,n).then($).catch((function(e){return console.error(e)}))}({orders:p.filter((function(e,t){return T.includes(t)}))}).then((function(e){s.b.dark("Imported ".concat(e.length," orders")),L()}))},setInitialState:L}),r.a.createElement(me,{isOpen:j,toggle:R,modalType:"editAddress",addresses:b,handleUpdateAddress:function(e){var t=e.premise,a=e.street,n=e.posttown,r=e.county,c=e.postcode,l=p.map((function(e,l){return l===q.activeOrderIndex&&(e.deliver_to_attributes.address1=t+" "+a,e.deliver_to_attributes.city=n,e.deliver_to_attributes.state=r,e.deliver_to_attributes.zip=c),e}));R(),E(l)}}))};var fe=function(){var e=J[0],t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(e),i=Object(d.a)(o,2),u=i[0],m=i[1];return r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Update Google Spreadsheet"),c?r.a.createElement(B,{style:{width:"70px",height:"70px",marginTop:"50px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null,"Select Spreadsheet"),r.a.createElement(P,{options:J,objectTitleKey:"title",onChange:m,useObjects:!0}),r.a.createElement(R.a,{onClick:function(){l(!0),function(e){var t=e.vendor,a="".concat(H,"/update/").concat(t);return fetch(a).then($).catch((function(e){return console.error(e)}))}({vendor:u.name}).then((function(t){t.length>0?s.b.dark("Added ".concat(t.length," order(s)")):s.b.dark("No orders added"),l(!1),m(e)}))}},"Update")))},pe=a(36),Ee=(a(113),a(9)),he=a.n(Ee),ve=a(349),be=a(350);var ge=function(e){var t=e.formState,a=e.onFormChange,n=e.onSubmit,c=e.toggleView,l=t.title,o=t.date,i=t.time,u=t.length;return r.a.createElement("div",{style:{width:"400px"}},r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Title"),r.a.createElement(w.a,{name:"title",type:"text",value:l,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Date"),r.a.createElement(w.a,{type:"date",name:"date",value:o,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Time"),r.a.createElement(w.a,{type:"time",name:"time",value:i,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Length (min)"),r.a.createElement(w.a,{type:"select",name:"length",value:u,onChange:a},r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"45"},"45"),r.a.createElement("option",{value:"60"},"60"))),r.a.createElement("div",{className:"centered-parent"},r.a.createElement(R.a,{color:"danger",onClick:c},"Back"),r.a.createElement(R.a,{onClick:n},"Create")))};var Oe=function(e){var t=e.formState,a=e.onFormChange,n=e.calendars,c=e.toggleView,l=t.orderUrl,o=t.calendar,i=t.attendees;return r.a.createElement("div",{className:"event-form"},r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Veeqo Order URL"),r.a.createElement(w.a,{name:"orderUrl",type:"text",value:l,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Select Calendar"),r.a.createElement(P,{name:"calendar",options:n,objectTitleKey:"summary",value:o.summary,onChange:a,useObjects:!0,style:{marginBottom:"10px",width:"250px"}})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Attendees"),r.a.createElement(z,{name:"attendees",options:i,onChange:a})),r.a.createElement(R.a,{onClick:c},"Next"))},ye={orderUrl:"",calendar:null,attendees:[],title:"",date:"",time:"",length:"30"};var je=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("initial"),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useReducer)(te,ye),f=Object(d.a)(m,2),p=f[0],E=f[1],h=Object(n.useState)([]),v=Object(d.a)(h,2),b=v[0],g=v[1],O=Object(n.useState)(null),y=Object(d.a)(O,2),j=y[0],C=y[1];function k(){"initial"===i?function(e){var t=e.orderUrl,a="".concat(H,"/veeqo?url=").concat(t);return fetch(a).then($).catch((function(e){return console.error(e)}))}({orderUrl:p.orderUrl}).then((function(e){x(e,(function(){s.b.dark("Using order ".concat(e.number)),C(e),u("form")}))})):u("initial")}function S(e,t){if(t)E(Object(pe.a)({},t,e));else{var a=e.target,n=a.name,r=a.value;E(Object(pe.a)({},n,r))}}function x(e,t){e.error?s.b.error(e.message):t(e)}return Object(n.useEffect)((function(){(function(){var e="".concat(H,"/calendar");return fetch(e).then($).catch((function(e){return console.error(e)}))})().then((function(e){S(e[0],"calendar"),g(e),c(!1)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Create Event"),a?r.a.createElement(B,{style:{marginTop:"120px"}}):"initial"===i?r.a.createElement(Oe,{formState:p,onFormChange:S,calendars:b,toggleView:k}):r.a.createElement(ge,{formState:p,onFormChange:S,onSubmit:function(){var e=p.calendar,t=p.title,a=p.date,n=p.time,r=p.length,c=p.attendees;if(""!==t&&""!==a&&""!==n){var l="".concat(a," ").concat(n),o=he()(l,"YYYY-MM-DD HH-mm");(function(e){var t=e.event,a="".concat(H,"/calendar"),n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};return fetch(a,n).then($).catch((function(e){return console.error(e)}))})({event:{order:j,calendar:e,attendees:c,title:t,start:o.toISOString(),end:o.add(r,"minutes").toISOString()}}).then((function(e){x(e,(function(){s.b.dark("Event added successfully"),E(Object(ee.a)(Object(ee.a)({},ye),{},{calendar:b[0]})),C(null),u("initial")}))}))}else s.b.dark("No inputs may be empty")},toggleView:k}))};a(217);var Ce=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],m=he()().format("YYYY-MM");return r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Turnover"),r.a.createElement(N.a,{onSubmit:function(e){e.preventDefault();var t=e.target.elements.date.value;t?(u(null),c(!0),Q({start:he()(t).startOf("month").format("YYYY/MM/DD"),end:he()(t).endOf("month").format("YYYY/MM/DD")}).then((function(e){u(e),c(!1)}))):s.b.dark("Please select a date")},className:"date-form"},r.a.createElement(V,null,"Select Month"),r.a.createElement(w.a,{type:"month",name:"date",min:"2017-04",max:m}),r.a.createElement(R.a,{type:"submit"},"Calculate")),a&&r.a.createElement(B,{style:{marginTop:"50px"}}),i&&r.a.createElement("div",{className:"totals-wrapper"},r.a.createElement(M,{header:"Total excluding VAT",text:"\xa3".concat(i.total_ex_vat)}),r.a.createElement(M,{header:"Total including VAT",text:"\xa3".concat(i.total_with_vat)})))},ke=a(32),Se=a.n(ke),xe=a(48);a(114);var we=function(e){var t=e.orders;return r.a.createElement(ae.a,{bordered:!0,striped:!0,size:"sm",id:"orderwell-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Order Number"),r.a.createElement("th",null,"Items"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.date),r.a.createElement("td",null,r.a.createElement("a",{target:"_blank",href:e.url,rel:"noopener noreferrer"},e.id)),r.a.createElement("td",null,e.items.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},t>0&&r.a.createElement("br",null),e)}))))}))))};var _e=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(d.a)(l,2),i=o[0],u=o[1];function m(){return(m=Object(xe.a)(Se.a.mark((function e(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X().then((function(e){u(e),c(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Order Well"),a?r.a.createElement(B,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{onClick:function(){var e,t,a=document.getElementById("orderwell-table"),n=document.body;if(document.createRange&&window.getSelection){e=document.createRange(),(t=window.getSelection()).removeAllRanges();try{e.selectNodeContents(a),t.addRange(e)}catch(r){e.selectNode(a),t.addRange(e)}}else n.createTextRange&&((e=n.createTextRange()).moveToElementText(a),e.select());document.execCommand("Copy")}},"Copy"),r.a.createElement(we,{orders:i})))},Ne=(a(219),a(220),a(221),a(182)),Te={startDate:null,endDate:null,focusedInput:null};var De=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useReducer)(te,Te),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)(null),f=Object(d.a)(m,2),p=f[0],E=f[1],h=Object(n.useState)(null),v=Object(d.a)(h,2),b=v[0],g=v[1];function O(e,t){return y.apply(this,arguments)}function y(){return(y=Object(xe.a)(Se.a.mark((function e(t,a){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t).then((function(e){E(e)}));case 2:return e.next=4,Q(a).then((function(e){g(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(xe.a)(Se.a.mark((function e(){var t,a,n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.startDate,a=i.endDate,!t||!a){e.next=12;break}return E(null),g(null),c(!0),n={start:t.format("YYYY/MM/DD"),end:a.format("YYYY/MM/DD")},r={start:t.clone().subtract(1,"years").format("YYYY/MM/DD"),end:a.clone().subtract(1,"years").format("YYYY/MM/DD")},e.next=9,O(n,r);case 9:c(!1),e.next=13;break;case 12:s.b.dark("Please select both dates");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Sales Comparison"),r.a.createElement(V,null,"Select Date Range"),r.a.createElement(Ne.DateRangePicker,{startDate:i.startDate,startDateId:"1",endDate:i.endDate,endDateId:"2",onDatesChange:u,focusedInput:i.focusedInput,onFocusChange:function(e){return u({focusedInput:e})},isOutsideRange:function(e){return e.isBefore(he()("04/2018","MM/YYYY"))||e.isAfter(he()())},displayFormat:"DD/MM/YYYY"}),r.a.createElement(R.a,{onClick:function(){return j.apply(this,arguments)},className:"calc-button"},"Calculate"),a&&r.a.createElement(B,{style:{marginTop:"50px"}}),p&&b&&r.a.createElement("div",{className:"totals-wrapper"},r.a.createElement(M,{header:"Previous Year",text:b.total_with_vat,description:"*With VAT"}),r.a.createElement(M,{header:"Selected Year",text:p.total_with_vat,description:"*With VAT"})))};a(174);var Ye=function(e){var t=e.parcel,a=e.index,n=e.onClick;return r.a.createElement("span",{className:"parcel-box"},r.a.createElement("span",null,t.quantity," x ",t.name),r.a.createElement("button",{className:"icon-button",name:"delete",id:a,onClick:n},r.a.createElement(F.a,{icon:"times"})))};var Ie=function(e){var t,a,c=e.items,l=e.parcels,o=e.updateFormState,i=Object(n.useState)(!1),u=Object(d.a)(i,2),m=u[0],s=u[1],f=function(){return s(!m)},p=Object(n.useRef)(null);function E(e){var t=e.currentTarget,a=t.id,n=t.name,r=Object(ee.a)({},c[a]),i=Object(I.a)(l);if("add"===n){var u=i.findIndex((function(e){return e._id===r._id}));o(function(e,t,a){t>-1?e[t].quantity+=1:e.push(Object(ee.a)(Object(ee.a)({},a),{},{quantity:1}));return e}(i,u,r),"parcels")}else"delete"===n&&o(function(e,t){e[t].quantity>1?e[t].quantity-=1:e.splice(t,1);return e}(i,a),"parcels")}return t=p,a=f,Object(n.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&a()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,a]),r.a.createElement("div",{className:"items-select"},r.a.createElement("div",{className:m?"items-bar open":"items-bar"},r.a.createElement("div",{className:"items-container"},l.map((function(e,t){return r.a.createElement(Ye,{key:t,index:t,parcel:e,onClick:E})}))),r.a.createElement("div",{className:"filler"}),r.a.createElement("button",{className:"icon-button",onClick:function(){return o([],"parcels")}},r.a.createElement(F.a,{icon:"times"})),r.a.createElement("button",{className:"icon-button",onClick:f},r.a.createElement(F.a,{icon:"chevron-down"}))),m&&r.a.createElement("div",{className:"items-dropdown",ref:p},c.map((function(e,t){return r.a.createElement("button",{key:t,name:"add",id:t,onClick:E},e.name)}))))},Fe=a(180);var qe=function(e){var t=e.formState,a=e.carriers,n=e.onFormChange,c=e.updateFormState;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{style:{width:"400px"}},r.a.createElement(U.a,{addonType:"prepend"},r.a.createElement(Fe.a,null,"URL")),r.a.createElement(w.a,{name:"orderUrl",type:"text",placeholder:"Veeqo Order URL",value:t.orderUrl,onChange:n})),r.a.createElement(V,null,"Select Carrier"),r.a.createElement(P,{name:"carrier",useObjects:!0,options:a,onChange:c}),r.a.createElement(V,null,"Select Service"),r.a.createElement(P,{name:"service",useObjects:!0,options:t.carrier.services,onChange:c}),r.a.createElement(V,null,"Parcels"))},Ue={orderUrl:"",carrier:null,service:null,parcels:[]};var Re=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useReducer)(te,Ue),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)([]),f=Object(d.a)(m,2),p=f[0],E=f[1],h=Object(n.useState)([]),v=Object(d.a)(h,2),b=v[0],g=v[1];function O(){return(O=Object(xe.a)(Se.a.mark((function e(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G().then((function(e){g(e)}));case 2:return e.next=4,Z().then((function(e){E(e),j(e)}));case 4:c(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){u(Object(pe.a)({},t,e))}function j(e){u(e?Object(ee.a)(Object(ee.a)({},Ue),{},{carrier:e[0],service:e[0].services[0]}):{orderUrl:"",parcels:[]})}return Object(n.useEffect)((function(){!function(){O.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Create Shipment"),a?r.a.createElement(B,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,{carriers:p,formState:i,updateFormState:y,onFormChange:function(e){var t=e.target,a=t.name,n=t.value;u(Object(pe.a)({},a,n))}}),r.a.createElement(Ie,{items:b,parcels:i.parcels,updateFormState:y}),r.a.createElement("h6",null,"Total weight: ",i.parcels.reduce((function(e,t){return e+t.quantity*t.weight}),0)," kg"),r.a.createElement(R.a,{onClick:function(){var e={shipment:{order_url:i.orderUrl,carrier:i.carrier.code,service:i.service.code,parcels:i.parcels}};(function(){var e=i.parcels,t=i.orderUrl;return e.length>0&&""!==t})()?(s.b.dark("Creating shipment..."),function(e){var t=e.shipment,a="".concat(H,"/shipping/create/"),n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};return fetch(a,n).then($).catch((function(e){return console.error(e)}))}(e).then((function(e){var t;e.error?s.b.dark(e.message):(s.b.dark("Created shipment"),j(),t=e.label,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(t)+"'></iframe>"))}))):s.b.dark("Parcels & Veeqo URL cannot be empty")}},"Create")))};a(175);var Me=function(e){var t=e.item,a=e.onClick,n=e.formState,c=t.name,l=t._id;return r.a.createElement("span",{className:l===n._id?"item-selected item":"item",onClick:function(){return a(t)}},c)};var Ve=function(e){var t=e.formState,a=e.onFormChange,n=t.name,c=t.height,l=t.width,o=t.length,i=t.weight;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Name"),r.a.createElement(w.a,{type:"text",name:"name",value:n,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Height (cm)"),r.a.createElement(w.a,{name:"height",type:"number",min:0,value:c,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Width (cm)"),r.a.createElement(w.a,{name:"width",type:"number",min:0,value:l,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Length (cm)"),r.a.createElement(w.a,{name:"length",type:"number",min:0,value:o,onChange:a})),r.a.createElement(ve.a,null,r.a.createElement(be.a,null,"Weight (kg)"),r.a.createElement(w.a,{name:"weight",type:"number",min:0,value:i,onChange:a})))},Ae={_id:null,name:"",height:"",width:"",length:"",weight:""};var Pe=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useReducer)(te,Ae),f=Object(d.a)(m,2),p=f[0],E=f[1];function h(e){var t=e.target,a=t.name,n=t.value;E(Object(pe.a)({},a,n))}function v(e){var t=e.target.name,a={id:p._id?p._id.$oid:null,item:{name:p.name,height:p.height,width:p.width,length:p.length,weight:p.weight}};(function(){var e=p.name,t=p.height,a=p.width,n=p.length,r=p.weight;return""!==e&&""!==t&&""!==a&&""!==r&&""!==n||(s.b.dark("Form elements cannot be empty."),!1)})()&&("delete"===t?function(e){var t=e.id,a="".concat(H,"/shipping/items?id=").concat(t);return fetch(a,{method:"DELETE"}).then($).catch((function(e){return console.error(e)}))}(a).then((function(e){b(e)})):function(e){var t=e.id,a=e.item,n="".concat(H,"/shipping/items");t&&(n+="?id=".concat(t));var r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)};return fetch(n,r).then($).catch((function(e){return console.error(e)}))}(a).then((function(e){b(e)})))}function b(e){if(e.error)s.b.dark(e.message);else{var t=Object(I.a)(i);"created"===e.status?(s.b.dark("Created item"),t=function(e,t){return E(t.item),e.push(t.item),e}(t,e)):"updated"===e.status?(s.b.dark("Updated item"),t=function(e,t){var a=i.findIndex((function(e){return e._id.$oid===t.item._id.$oid}));return e[a]=t.item,e}(t,e)):"deleted"===e.status&&(s.b.dark("Deleted item"),t=function(e,t){return e=i.filter((function(e){return e._id.$oid!==t._id})),E(Ae),e}(t,e)),u(t)}}return Object(n.useEffect)((function(){G().then((function(e){u(e),c(!1)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(A,null,"Edit Items"),a?r.a.createElement(B,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{color:"primary",size:"sm",onClick:function(){E(Ae)}},"Create Item"),r.a.createElement("div",{className:"items-menu-container"},r.a.createElement("div",{className:"items-menu"},r.a.createElement(V,null,"Items"),i.map((function(e,t){return r.a.createElement(Me,{key:t,item:e,onClick:E,formState:p})}))),r.a.createElement("div",{className:"items-form"},p._id?r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null,"Edit Item"),r.a.createElement(Ve,{formState:p,onFormChange:h}),r.a.createElement("div",{className:"centered-parent"},r.a.createElement(R.a,{name:"delete",color:"danger",onClick:v},"Delete"),r.a.createElement(R.a,{name:"update",onClick:v},"Update"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null,"Create Item"),r.a.createElement(Ve,{formState:p,onFormChange:h}),r.a.createElement(R.a,{name:"create",onClick:v},"Create"))))))};var Le=function(){return r.a.createElement(A,null,"404 - Page not found")};u.b.add({faUpload:m.f,faPlus:m.c,faPencilAlt:m.b,faTrashAlt:m.e,faTimes:m.d,faChevronDown:m.a});var Be=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(o.a,null,r.a.createElement(C,null),r.a.createElement(s.a,{hideProgressBar:!0,autoClose:3e3}),r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:W}),r.a.createElement(i.a,{path:"/update",component:fe}),r.a.createElement(i.a,{path:"/import/",component:de}),r.a.createElement(i.a,{path:"/calendar/",component:je}),r.a.createElement(i.a,{path:"/bandq/turnover",component:Ce}),r.a.createElement(i.a,{path:"/bandq/orderwell",component:_e}),r.a.createElement(i.a,{path:"/bandq/comparison",component:De}),r.a.createElement(i.a,{path:"/shipping/create",component:Re}),r.a.createElement(i.a,{path:"/shipping/items",component:Pe}),r.a.createElement(i.a,{component:Le})))))};l.a.render(r.a.createElement(Be,null),document.getElementById("root"))},65:function(e,t,a){},66:function(e,t,a){}},[[331,1,2]]]);
//# sourceMappingURL=main.ef446029.chunk.js.map