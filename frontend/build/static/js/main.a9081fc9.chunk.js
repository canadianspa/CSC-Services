(this["webpackJsonpcsc-frontend"]=this["webpackJsonpcsc-frontend"]||[]).push([[0],{113:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},189:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},218:function(e,t,a){},228:function(e,t){},330:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(188),a(182)),i=a(17),u=(a(189),a(63)),m=a(48),s=a(15),d=(a(192),a(11)),p=a(333),f=a(334),h=a(335),E=a(336),b=a(337),v=a(338),g=a(353),y=a(351),O=a(352),j=a(339);var C=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1];return r.a.createElement(p.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(f.a,{href:"/"},r.a.createElement("img",{className:"logo",src:"/images/csc-logo.png",alt:"logo"})),r.a.createElement(f.a,{href:"/"},"CSC Services"),r.a.createElement(h.a,{onClick:function(){return c(!a)}}),r.a.createElement(E.a,{isOpen:a,navbar:!0},r.a.createElement(b.a,{className:"mr-auto",navbar:!0},r.a.createElement(v.a,{href:"/update"},"Update"),r.a.createElement(v.a,{href:"/import"},"Import"),r.a.createElement(g.a,{nav:!0,inNavbar:!0},r.a.createElement(y.a,{nav:!0,caret:!0},"B & Q"),r.a.createElement(O.a,{right:!0},r.a.createElement(j.a,null,r.a.createElement(v.a,{href:"/bandq/turnover"},"Turnover")),r.a.createElement(j.a,null,r.a.createElement(v.a,{href:"/bandq/orderwell"},"Order Well")),r.a.createElement(j.a,null,r.a.createElement(v.a,{href:"/bandq/comparison"},"Sales Comparison")))),r.a.createElement(g.a,{nav:!0,inNavbar:!0},r.a.createElement(y.a,{nav:!0,caret:!0},"Shipping"),r.a.createElement(O.a,{right:!0},r.a.createElement(j.a,null,r.a.createElement(v.a,{href:"/shipping/create"},"Create")),r.a.createElement(j.a,null,r.a.createElement(v.a,{href:"/shipping/items"},"Items")))))))};var k=function(e){var t=e.header,a=e.text,n=e.description;return r.a.createElement("div",{className:"card"},r.a.createElement("label",null,t),r.a.createElement("span",null,a),n&&r.a.createElement("p",null,n))};a(75);var S=function(e){var t=e.children;return r.a.createElement("div",{className:"header"},t)};var _=function(e){var t=e.children;return r.a.createElement("div",{className:"jumbotron"},t)},w=a(340);var x=function(e){var t=e.options,a=e.onChange,n=e.useObjects,c=e.objectTitleKey,l=void 0===c?"name":c,o=e.multiple,i=e.name,u=e.style;return r.a.createElement(w.a,{type:"select",className:"select",name:i,style:u,multiple:!!o,onChange:function(e){if(n){var r=e.target,c=r.value,o=r.name,i=t.find((function(e){return e[l]===c}));a(i,o)}else a(e)}},t.map((function(e,t){return r.a.createElement("option",{key:t},n?e[l]:e)})))},N=a(341);var D=function(e){var t=e.options,a=e.onSubmit,n=e.useObjects,c=e.optionKey,l=e.children,o=e.inputStyle;return r.a.createElement(N.a,{onSubmit:function(e){e.preventDefault();var r=e.target.elements.option.value;if(r)if(n){var l=t.find((function(e){return e[c]===r}));a(l)}else a(r);else a(t[0])}},r.a.createElement(w.a,{name:"option",type:"select",multiple:!0,style:o},t.map((function(e,t){var a=n?e[c]:e;return r.a.createElement("option",{key:t,value:a},a)}))),l)},T=a(342);var Y=k,I=S,F=_,q=x,R=D,M=function(e){var t=e.style;return r.a.createElement(T.a,{color:"dark",className:"spinner",style:t})};var P=function(){return r.a.createElement(F,null,"Welcome to Canadian Spa Services")},U=a(56),A=(a(65),"/api"),V=[{name:"bandq",title:"B&Q"},{name:"homebase",title:"Homebase"},{name:"jtf",title:"JTF"},{name:"wayfair",title:"Wayfair"},{name:"range",title:"The Range"},{name:"travisperkins",title:"Travis Perkins"},{name:"robert_dyas",title:"Robert Dyas"},{name:"hornbach",title:"Hornbach"},{name:"shop_direct",title:"Shop Direct"}],L=[{name:"bandq",title:"B&Q CSV",requires_file:!0,file_type:".csv"},{name:"argos",title:"Argos CSV",requires_file:!0,file_type:".csv"},{name:"range",title:"The Range",requires_file:!1,file_type:null},{name:"homebase",title:"Homebase XML",requires_file:!0,file_type:".xml"},{name:"wayfair",title:"Wayfair CSV",requires_file:!0,file_type:".csv"},{name:"robert_dyas",title:"Robert Dyas CSV",requires_file:!0,file_type:".csv"},{name:"shop_direct",title:"Shop Direct TXT",requires_file:!0,file_type:".txt"},{name:"globus",title:"Globus XML",requires_file:!0,file_type:".xml"},{name:"hornbach",title:"Hornbach PDF",requires_file:!0,file_type:".pdf"}];function z(e){if(e.ok)return e.json();throw new Error("Bad response.")}function B(e){var t=e.start,a=e.end,n="".concat(A,"/bandq/turnover?start=").concat(t,"&end=").concat(a);return fetch(n).then(z).catch((function(e){return console.error(e)}))}function W(){var e="".concat(A,"/bandq/orderwell");return fetch(e).then(z).catch((function(e){return console.error(e)}))}function J(){var e="".concat(A,"/shipping/items");return fetch(e).then(z).catch((function(e){return console.error(e)}))}function H(){var e="".concat(A,"/shipping/carriers");return fetch(e).then(z).catch((function(e){return console.error(e)}))}var K=a(35),$=function(e,t){return Object(K.a)(Object(K.a)({},e),t)};var Q=a(176),X=a(343);var G=function(e){var t=e.orders,a=e.handleEditClick,n=e.handleCheckboxClick;return r.a.createElement(X.a,{bordered:!0,striped:!0,responsive:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Address 1"),r.a.createElement("th",null,"City"),r.a.createElement("th",null,"County"),r.a.createElement("th",null,"Postcode"),r.a.createElement("th",null,"Country"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e,t){var c=e.deliver_to_attributes;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement(w.a,{type:"checkbox",id:t,defaultChecked:"true",onChange:n})),r.a.createElement("td",null,c.first_name),r.a.createElement("td",null,c.last_name),r.a.createElement("td",null,c.address1),r.a.createElement("td",null,c.city),r.a.createElement("td",null,c.state),r.a.createElement("td",null,c.zip),r.a.createElement("td",null,c.country),r.a.createElement("th",null,r.a.createElement(Q.a,{color:"secondary",size:"sm",id:t,onClick:a},"Edit Address")))}))))};var Z=function(e){var t=e.orders,a=e.file,n=e.handleEditAddressClick,c=e.handleCheckboxClick,l=e.handleImportClick,o=e.setInitialState;return 0===t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,"No orders found"),r.a.createElement(Q.a,{color:"danger",onClick:o},"Back")):r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(I,null,"File: ",a.name),r.a.createElement(G,{orders:t,handleCheckboxClick:c,handleEditClick:n}),r.a.createElement("div",{className:"centered-parent"},r.a.createElement(Q.a,{color:"danger",onClick:o},"Cancel"),r.a.createElement(Q.a,{onClick:l},"Import")))},ee=(a(214),a(46)),te=a(183);var ae=function(e){var t=e.selectedVendor,a=e.handleFileSubmit,c=Object(n.useCallback)((function(e){e[0]&&a(t.name,e[0])}),[t,a]),l=Object(te.a)({onDrop:c,multiple:!1,accept:t.file_type}),o=l.getRootProps,i=l.getInputProps;return r.a.createElement("div",Object.assign({},o(),{className:"dropzone-container"}),r.a.createElement("input",i()),r.a.createElement("div",{className:"dropzone-content"},r.a.createElement(ee.a,{icon:"upload"}),r.a.createElement("span",null,"Click to upload file (",t.file_type,")")))},ne=a(350),re=a(344),ce=a(345);var le=function(e){var t,a,n=e.isOpen,c=e.toggle,l=e.modalType,o=e.addresses,i=e.handleUpdateAddress;return"editAddress"===l&&(t="Select address",a=r.a.createElement(R,{options:o,onSubmit:i,useObjects:!0,optionKey:"summaryline",children:r.a.createElement("div",{className:"button-parent"},r.a.createElement(Q.a,{color:"danger",onClick:c},"Cancel"),r.a.createElement(Q.a,{color:"primary",type:"submit"},"Update"))})),r.a.createElement(ne.a,{isOpen:n},r.a.createElement(re.a,{toggle:c},t),r.a.createElement(ce.a,null,a))},oe={activeOrderIndex:null,selectedVendor:L[0]};var ie=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)([]),p=Object(d.a)(m,2),f=p[0],h=p[1],E=Object(n.useState)([]),b=Object(d.a)(E,2),v=b[0],g=b[1],y=Object(n.useState)(!1),O=Object(d.a)(y,2),j=O[0],C=O[1],k=Object(n.useState)(!0),S=Object(d.a)(k,2),_=S[0],w=S[1],x=Object(n.useState)([]),N=Object(d.a)(x,2),D=N[0],T=N[1],Y=Object(n.useReducer)($,oe),R=Object(d.a)(Y,2),P=R[0],V=R[1],B=function(){return C(!j)};function W(e,t){c(!0),function(e){var t=e.vendor,a=e.file,n="".concat(A,"/import/convert/").concat(t),r={method:"POST"};if(a){var c=new FormData;c.append("file",a),r.body=c}return fetch(n,r).then(z).catch((function(e){return console.error(e)}))}({vendor:e,file:t}).then((function(e){c(!1),e.error?s.b.dark("Error getting orders, ensure you are uploading the correct file."):(h(e),u(t),T(e.map((function(e,t){return t}))),w(!1))}))}function J(){V(oe),h([]),w(!0)}return r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Import to Veeqo"),_?r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,"Select data source"),r.a.createElement(q,{options:L,objectTitleKey:"title",onChange:function(e){V({selectedVendor:e}),e.requires_file||W(e.name)},useObjects:!0}),a?r.a.createElement(M,{style:{marginTop:"60px"}}):r.a.createElement(ae,{selectedVendor:P.selectedVendor,handleFileSubmit:W})):r.a.createElement(Z,{orders:f,file:i,handleEditAddressClick:function(e){var t=e.target.id,a=parseInt(t);(function(e){var t=e.postcode,a="".concat(A,"/postcoder?postcode=").concat(t);return fetch(a).then(z).catch((function(e){return console.error(e)}))})({postcode:f[a].deliver_to_attributes.zip}).then((function(e){V({activeOrderIndex:a}),g(e),C(!0)}))},handleCheckboxClick:function(e){var t=e.target,a=t.id,n=t.checked,r=parseInt(a);T(n?[].concat(Object(U.a)(D),[r]):D.filter((function(e){return e!==r})))},handleImportClick:function(){s.b.dark("Importing..."),function(e){var t=e.orders,a="".concat(A,"/import/orders"),n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};return fetch(a,n).then(z).catch((function(e){return console.error(e)}))}({orders:f.filter((function(e,t){return D.includes(t)}))}).then((function(e){s.b.dark("Imported ".concat(e.length," orders")),J()}))},setInitialState:J}),r.a.createElement(le,{isOpen:j,toggle:B,modalType:"editAddress",addresses:v,handleUpdateAddress:function(e){var t=e.premise,a=e.street,n=e.posttown,r=e.county,c=e.postcode,l=f.map((function(e,l){return l===P.activeOrderIndex&&(e.deliver_to_attributes.address1=t+" "+a,e.deliver_to_attributes.city=n,e.deliver_to_attributes.state=r,e.deliver_to_attributes.zip=c),e}));B(),h(l)}}))};var ue=function(){var e=V[0],t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(e),i=Object(d.a)(o,2),u=i[0],m=i[1];return r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Update Google Spreadsheet"),c?r.a.createElement(M,{style:{width:"70px",height:"70px",marginTop:"50px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,"Select Spreadsheet"),r.a.createElement(q,{options:V,objectTitleKey:"title",onChange:m,useObjects:!0}),r.a.createElement(Q.a,{onClick:function(){l(!0),function(e){var t=e.vendor,a="".concat(A,"/update/").concat(t);return fetch(a).then(z).catch((function(e){return console.error(e)}))}({vendor:u.name}).then((function(t){t.length>0?s.b.dark("Added ".concat(t.length," order(s)")):s.b.dark("No orders added"),l(!1),m(e)}))}},"Update")))},me=(a(215),a(9)),se=a.n(me);var de=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],m=se()().format("YYYY-MM");return r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Turnover"),r.a.createElement(N.a,{onSubmit:function(e){e.preventDefault();var t=e.target.elements.date.value;t?(u(null),c(!0),B({start:se()(t).startOf("month").format("YYYY/MM/DD"),end:se()(t).endOf("month").format("YYYY/MM/DD")}).then((function(e){u(e),c(!1)}))):s.b.dark("Please select a date")},className:"date-form"},r.a.createElement(I,null,"Select Month"),r.a.createElement(w.a,{type:"month",name:"date",min:"2017-04",max:m}),r.a.createElement(Q.a,{type:"submit"},"Calculate")),a&&r.a.createElement(M,{style:{marginTop:"50px"}}),i&&r.a.createElement("div",{className:"totals-wrapper"},r.a.createElement(Y,{header:"Total excluding VAT",text:"\xa3".concat(i.total_ex_vat)}),r.a.createElement(Y,{header:"Total including VAT",text:"\xa3".concat(i.total_with_vat)})))},pe=a(31),fe=a.n(pe),he=a(47);a(113);var Ee=function(e){var t=e.orders;return r.a.createElement(X.a,{bordered:!0,striped:!0,size:"sm",id:"orderwell-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Order Number"),r.a.createElement("th",null,"Items"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.date),r.a.createElement("td",null,r.a.createElement("a",{target:"_blank",href:e.url,rel:"noopener noreferrer"},e.id)),r.a.createElement("td",null,e.items.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},t>0&&r.a.createElement("br",null),e)}))))}))))};var be=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(d.a)(l,2),i=o[0],u=o[1];function m(){return(m=Object(he.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W().then((function(e){u(e),c(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Order Well"),a?r.a.createElement(M,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{onClick:function(){var e,t,a=document.getElementById("orderwell-table"),n=document.body;if(document.createRange&&window.getSelection){e=document.createRange(),(t=window.getSelection()).removeAllRanges();try{e.selectNodeContents(a),t.addRange(e)}catch(r){e.selectNode(a),t.addRange(e)}}else n.createTextRange&&((e=n.createTextRange()).moveToElementText(a),e.select());document.execCommand("Copy")}},"Copy"),r.a.createElement(Ee,{orders:i})))},ve=(a(218),a(219),a(220),a(180)),ge={startDate:null,endDate:null,focusedInput:null};var ye=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useReducer)($,ge),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)(null),p=Object(d.a)(m,2),f=p[0],h=p[1],E=Object(n.useState)(null),b=Object(d.a)(E,2),v=b[0],g=b[1];function y(e,t){return O.apply(this,arguments)}function O(){return(O=Object(he.a)(fe.a.mark((function e(t,a){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t).then((function(e){h(e)}));case 2:return e.next=4,B(a).then((function(e){g(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(he.a)(fe.a.mark((function e(){var t,a,n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.startDate,a=i.endDate,!t||!a){e.next=12;break}return h(null),g(null),c(!0),n={start:t.format("YYYY/MM/DD"),end:a.format("YYYY/MM/DD")},r={start:t.clone().subtract(1,"years").format("YYYY/MM/DD"),end:a.clone().subtract(1,"years").format("YYYY/MM/DD")},e.next=9,y(n,r);case 9:c(!1),e.next=13;break;case 12:s.b.dark("Please select both dates");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Sales Comparison"),r.a.createElement(I,null,"Select Date Range"),r.a.createElement(ve.DateRangePicker,{startDate:i.startDate,startDateId:"1",endDate:i.endDate,endDateId:"2",onDatesChange:u,focusedInput:i.focusedInput,onFocusChange:function(e){return u({focusedInput:e})},isOutsideRange:function(e){return e.isBefore(se()("04/2018","MM/YYYY"))||e.isAfter(se()())},displayFormat:"DD/MM/YYYY"}),r.a.createElement(Q.a,{onClick:function(){return j.apply(this,arguments)},className:"calc-button"},"Calculate"),a&&r.a.createElement(M,{style:{marginTop:"50px"}}),f&&v&&r.a.createElement("div",{className:"totals-wrapper"},r.a.createElement(Y,{header:"Previous Year",text:v.total_with_vat,description:"*With VAT"}),r.a.createElement(Y,{header:"Selected Year",text:f.total_with_vat,description:"*With VAT"})))},Oe=a(45);a(173);var je=function(e){var t=e.parcel,a=e.index,n=e.onClick;return r.a.createElement("span",{className:"parcel-box"},r.a.createElement("span",null,t.quantity," x ",t.name),r.a.createElement("button",{className:"icon-button",name:"delete",id:a,onClick:n},r.a.createElement(ee.a,{icon:"times"})))};var Ce=function(e){var t,a,c=e.items,l=e.parcels,o=e.updateFormState,i=Object(n.useState)(!1),u=Object(d.a)(i,2),m=u[0],s=u[1],p=function(){return s(!m)},f=Object(n.useRef)(null);function h(e){var t=e.currentTarget,a=t.id,n=t.name,r=Object(K.a)({},c[a]),i=Object(U.a)(l);if("add"===n){var u=i.findIndex((function(e){return e._id===r._id}));o(function(e,t,a){t>-1?e[t].quantity+=1:e.push(Object(K.a)(Object(K.a)({},a),{},{quantity:1}));return e}(i,u,r),"parcels")}else"delete"===n&&o(function(e,t){e[t].quantity>1?e[t].quantity-=1:e.splice(t,1);return e}(i,a),"parcels")}return t=f,a=p,Object(n.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&a()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,a]),r.a.createElement("div",{className:"items-select"},r.a.createElement("div",{className:m?"items-bar open":"items-bar"},r.a.createElement("div",{className:"items-container"},l.map((function(e,t){return r.a.createElement(je,{key:t,index:t,parcel:e,onClick:h})}))),r.a.createElement("div",{className:"filler"}),r.a.createElement("button",{className:"icon-button",onClick:function(){return o([],"parcels")}},r.a.createElement(ee.a,{icon:"times"})),r.a.createElement("button",{className:"icon-button",onClick:p},r.a.createElement(ee.a,{icon:"chevron-down"}))),m&&r.a.createElement("div",{className:"items-dropdown",ref:f},c.map((function(e,t){return r.a.createElement("button",{key:t,name:"add",id:t,onClick:h},e.name)}))))},ke=a(346),Se=a(347),_e=a(181);var we=function(e){var t=e.formState,a=e.carriers,n=e.onFormChange,c=e.updateFormState;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{style:{width:"400px"}},r.a.createElement(Se.a,{addonType:"prepend"},r.a.createElement(_e.a,null,"URL")),r.a.createElement(w.a,{name:"orderUrl",type:"text",placeholder:"Veeqo Order URL",value:t.orderUrl,onChange:n})),r.a.createElement(I,null,"Select Carrier"),r.a.createElement(q,{name:"carrier",useObjects:!0,options:a,onChange:c}),r.a.createElement(I,null,"Select Service"),r.a.createElement(q,{name:"service",useObjects:!0,options:t.carrier.services,onChange:c}),r.a.createElement(I,null,"Parcels"))},xe={orderUrl:"",carrier:null,service:null,parcels:[]};var Ne=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useReducer)($,xe),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)([]),p=Object(d.a)(m,2),f=p[0],h=p[1],E=Object(n.useState)([]),b=Object(d.a)(E,2),v=b[0],g=b[1];function y(){return(y=Object(he.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J().then((function(e){g(e)}));case 2:return e.next=4,H().then((function(e){h(e),j(e)}));case 4:c(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){u(Object(Oe.a)({},t,e))}function j(e){u(e?Object(K.a)(Object(K.a)({},xe),{},{carrier:e[0],service:e[0].services[0]}):{orderUrl:"",parcels:[]})}return Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Create Shipment"),a?r.a.createElement(M,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{carriers:f,formState:i,updateFormState:O,onFormChange:function(e){var t=e.target,a=t.name,n=t.value;u(Object(Oe.a)({},a,n))}}),r.a.createElement(Ce,{items:v,parcels:i.parcels,updateFormState:O}),r.a.createElement("h6",null,"Total weight: ",i.parcels.reduce((function(e,t){return e+t.quantity*t.weight}),0)," kg"),r.a.createElement(Q.a,{onClick:function(){var e={shipment:{order_url:i.orderUrl,carrier:i.carrier.code,service:i.service.code,parcels:i.parcels}};(function(){var e=i.parcels,t=i.orderUrl;return e.length>0&&""!==t})()?(s.b.dark("Creating shipment..."),function(e){var t=e.shipment,a="".concat(A,"/shipping/create/"),n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)};return fetch(a,n).then(z).catch((function(e){return console.error(e)}))}(e).then((function(e){var t;e.error?s.b.dark(e.message):(s.b.dark("Created shipment"),j(),t=e.label,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(t)+"'></iframe>"))}))):s.b.dark("Parcels & Veeqo URL cannot be empty")}},"Create")))};a(174);var De=function(e){var t=e.item,a=e.onClick,n=e.formState,c=t.name,l=t._id;return r.a.createElement("span",{className:l===n._id?"item-selected item":"item",onClick:function(){return a(t)}},c)},Te=a(348),Ye=a(349);var Ie=function(e){var t=e.formState,a=e.onFormChange,n=t.name,c=t.height,l=t.width,o=t.length,i=t.weight;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,null,r.a.createElement(Ye.a,null,"Name"),r.a.createElement(w.a,{type:"text",name:"name",value:n,onChange:a})),r.a.createElement(Te.a,null,r.a.createElement(Ye.a,null,"Height (cm)"),r.a.createElement(w.a,{name:"height",type:"number",min:0,value:c,onChange:a})),r.a.createElement(Te.a,null,r.a.createElement(Ye.a,null,"Width (cm)"),r.a.createElement(w.a,{name:"width",type:"number",min:0,value:l,onChange:a})),r.a.createElement(Te.a,null,r.a.createElement(Ye.a,null,"Length (cm)"),r.a.createElement(w.a,{name:"length",type:"number",min:0,value:o,onChange:a})),r.a.createElement(Te.a,null,r.a.createElement(Ye.a,null,"Weight (kg)"),r.a.createElement(w.a,{name:"weight",type:"number",min:0,value:i,onChange:a})))},Fe={_id:null,name:"",height:"",width:"",length:"",weight:""};var qe=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],m=Object(n.useReducer)($,Fe),p=Object(d.a)(m,2),f=p[0],h=p[1];function E(e){var t=e.target,a=t.name,n=t.value;h(Object(Oe.a)({},a,n))}function b(e){var t=e.target.name,a={id:f._id?f._id.$oid:null,item:{name:f.name,height:f.height,width:f.width,length:f.length,weight:f.weight}};(function(){var e=f.name,t=f.height,a=f.width,n=f.length,r=f.weight;return""!==e&&""!==t&&""!==a&&""!==r&&""!==n||(s.b.dark("Form elements cannot be empty."),!1)})()&&("delete"===t?function(e){var t=e.id,a="".concat(A,"/shipping/items?id=").concat(t);return fetch(a,{method:"DELETE"}).then(z).catch((function(e){return console.error(e)}))}(a).then((function(e){v(e)})):function(e){var t=e.id,a=e.item,n="".concat(A,"/shipping/items");t&&(n+="?id=".concat(t));var r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)};return fetch(n,r).then(z).catch((function(e){return console.error(e)}))}(a).then((function(e){v(e)})))}function v(e){if(e.error)s.b.dark(e.message);else{var t=Object(U.a)(i);"created"===e.status?(s.b.dark("Created item"),t=function(e,t){return h(t.item),e.push(t.item),e}(t,e)):"updated"===e.status?(s.b.dark("Updated item"),t=function(e,t){var a=i.findIndex((function(e){return e._id.$oid===t.item._id.$oid}));return e[a]=t.item,e}(t,e)):"deleted"===e.status&&(s.b.dark("Deleted item"),t=function(e,t){return e=i.filter((function(e){return e._id.$oid!==t._id})),h(Fe),e}(t,e)),u(t)}}return Object(n.useEffect)((function(){J().then((function(e){u(e),c(!1)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement(F,null,"Edit Items"),a?r.a.createElement(M,{style:{marginTop:"120px"}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{color:"primary",size:"sm",onClick:function(){h(Fe)}},"Create Item"),r.a.createElement("div",{className:"items-menu-container"},r.a.createElement("div",{className:"items-menu"},r.a.createElement(I,null,"Items"),i.map((function(e,t){return r.a.createElement(De,{key:t,item:e,onClick:h,formState:f})}))),r.a.createElement("div",{className:"items-form"},f._id?r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,"Edit Item"),r.a.createElement(Ie,{formState:f,onFormChange:E}),r.a.createElement("div",{className:"centered-parent"},r.a.createElement(Q.a,{name:"delete",color:"danger",onClick:b},"Delete"),r.a.createElement(Q.a,{name:"update",onClick:b},"Update"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null,"Create Item"),r.a.createElement(Ie,{formState:f,onFormChange:E}),r.a.createElement(Q.a,{name:"create",onClick:b},"Create"))))))};var Re=function(){return r.a.createElement(F,null,"404 - Page not found")};u.b.add({faUpload:m.f,faPlus:m.c,faPencilAlt:m.b,faTrashAlt:m.e,faTimes:m.d,faChevronDown:m.a});var Me=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(o.a,null,r.a.createElement(C,null),r.a.createElement(s.a,{hideProgressBar:!0,autoClose:3e3}),r.a.createElement("div",{className:"wrapper"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:P}),r.a.createElement(i.a,{path:"/update",component:ue}),r.a.createElement(i.a,{path:"/import/",component:ie}),r.a.createElement(i.a,{path:"/bandq/turnover",component:de}),r.a.createElement(i.a,{path:"/bandq/orderwell",component:be}),r.a.createElement(i.a,{path:"/bandq/comparison",component:ye}),r.a.createElement(i.a,{path:"/shipping/create",component:Ne}),r.a.createElement(i.a,{path:"/shipping/items",component:qe}),r.a.createElement(i.a,{component:Re})))))};l.a.render(r.a.createElement(Me,null),document.getElementById("root"))},65:function(e,t,a){},75:function(e,t,a){}},[[330,1,2]]]);
//# sourceMappingURL=main.a9081fc9.chunk.js.map